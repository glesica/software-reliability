<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>/topics/pure-functions [software reliability]</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <style>
  div.sourceCode, pre.output {
      border: 1px solid gainsboro;
      box-shadow: 3px 3px 10px gainsboro;
      display: block;
      font-size: 0.9rem;
      padding: 1.0rem;
  }

  figure {
      text-align: center;
  }

  figcaption {
      font-size: 0.8rem;
      font-style: italic;
      text-align: center;
  }

  #before {
      display: flex;
      justify-content: space-between;
      border-bottom: 1px solid black;
  }

  #after {
      display: flex;
      justify-content: space-between;
      border-top: 1px solid black;
  }
  </style>
</head>
<body>
<div id="banner">
    <img src="media/header.jpg" alt="Course Header">
</div>
<div id="before">
    Software Reliability and Testing
    <div id="before-links">
        <a href="../.." title="Course Home">Home</a> |
        <a href="https://github.com/glesica/software-reliability" title="Course GitHub Page">GitHub</a>
    </div>
</div>
<h1 id="pure-functions">Pure Functions</h1>
<p>We’ve probably all heard that functions are black boxes that take inputs and produce outputs. And you’ve probably seen a diagram like the one below before. But what does it mean for a function to be “pure” and how do pure functions help us test our code?</p>
<p>A pure function is one that takes inputs and produces outputs, as illustrated above and, furthermore, has no “side effects” and no dependencies on any state outside of the function inputs. A side effect is any modification of the “world” outside the function itself. For example, the function below prints to the screen, which is a side effect:</p>
<pre class="python3"><code>def add(a, b):
  c = a + b
  print(c)
  return c</code></pre>
<p>So even though this function also returns a value, it is not a “pure” function. Another example of a side effect is modifying external state, such as the state of a class instance:</p>
<pre class="python3"><code>class Greeter:
  def __init__(self):
    self.greeting = &#39;hello&#39;

  def setGreeting(self, greeting):
    self.greeting = greeting</code></pre>
<p>In this case, the setGreeting function doesn’t even return a value, it just modifies state outside of the function itself.</p>
<p>There’s nothing wrong with impure functions, in fact without them we’d never be able to see the results of our computations. But they tend to be more difficult to test than pure functions. The reason for this is that we have to check more places to find out whether the function did what it was supposed to do. In the first example above, we can easily assert that the value returned from the function is the sum of its two arguments, but how would we verify that it printed that sum to the console?</p>
<p>In the second example above, once we’ve called the setGreeting function we have to check the greeting attribute on the class to find out if it worked or not. If setGreeting added to the string, or transformed it in some other way, we’d also need to make sure that we started out with the correct value in the greeting attribute before running the test. Consider the following class:</p>
<pre class="python3"><code>class Adder:
  def __init__(self):
    self.sum = 0

  def add(self, value):
    self.sum = self.sum + value</code></pre>
<p>Note that the add method is dependent on the current state of the sum attribute. If we change sum before we call add we will get a different result for a given argument (such as 5). In order to test this reliably we need to be careful not to allow the sum attribute to be modified before we get our hands on it, or we need to remember to reset it to our preferred start value. If we used a pure function instead our test would be much simpler to think about, and probably a bit simpler to write as well:</p>
<pre class="python3"><code>def adder(sum, addend):
  return sum + addend</code></pre>
<p>These are pretty silly examples, but they do illustrate the differences between pure and impure functions.</p>
<h2 id="further-reading">Further Reading</h2>
<ul>
<li>https://interactivepython.org/courselib/static/thinkcspy/Lists/PureFunctions.html</li>
<li>https://en.wikipedia.org/wiki/Pure_function</li>
</ul>

<div id="after">
    <a href="#">Back to top</a>
    <div id="after-links">
        <a href="../.." title="Course Home">Home</a> |
        <a href="https://github.com/glesica/software-reliability" title="Course GitHub Page">GitHub</a>
    </div>
</div>
</body>
</html>
